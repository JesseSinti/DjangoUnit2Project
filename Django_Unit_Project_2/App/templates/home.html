{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'home.css' %}">

<section class="about-section" id="about">
    <div class="container">
        <p class="about-text">
            We are a modern event management and ticketing platform designed
            to help organizations create, manage, and sell tickets with ease.
        </p>
    </div>
</section>

<section class="events-section" id="events">
    <div class="container">
        <div class="events-header">
            <h2 class="section-title">Upcoming Events</h2>
        </div>

        <div class="events-grid">
            {% if SearchActive %}
                {% for event in Events %}
                    {% include "partials/event_card.html" with event=event %}
                {% empty %}
                    <div class="no-events-container">
                        <p class="no-tickets">No events matched your search.</p>
                    </div>
                {% endfor %}
            {% else %}
                {% for event in Event %}
                    <article class="event-card">
                        <div class="event-image">
                            {% if event.banner_image %}
                            <img src="{{ event.banner_image.url }}" alt="{{ event.title }}">
                            {% endif %}
                        </div>
                    
                        <div class="event-content">
                            <span class="event-date">{{ event.location }} â€¢ {{ event.date }}</span>
                            <h3 class="event-title">{{ event.title }}</h3>
                            <p class="event-desc">{{ event.description|truncatewords:20 }}</p>
                        </div>
                    
                        <div class="ticket-tiers">
                            {% for tier in event.ticket_tiers.all %}
                            <div class="ticket-tier">
                                <div class="tier-top-row" style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <span style="font-weight:700;">{{ tier.type }}</span>
                                    <span class="tier-price">${{ tier.price|floatformat:2 }}</span>
                                </div>
                                <div class="ticket-actions">
                                    <form action="{% url 'Add_Ticket_Cart' tier.id %}" method="POST" class="ticket-purchase-form">
                                        {% csrf_token %}
                                        <input type="hidden" name="quantity" value="1" class="hidden-quantity-input">
                                        <button type="button" class="btn-ticket btn-buy initial-buy-btn" style="width:100%;">Add to cart</button>
                                        
                                        <div class="quantity-selector hidden" style="display:flex; align-items:center; justify-content:space-between; padding: 0 10px; height:48px; margin-bottom:0.5rem;">
                                            <button type="button" class="qty-btn decrease-btn" style="background:none; border:none; color:var(--primary-purple); cursor:pointer;"><i class="fa-solid fa-trash-can"></i></button>
                                            <span class="qty-display" style="font-weight:800;">1</span>
                                            <button type="button" class="qty-btn increase-btn" style="background:none; border:none; color:var(--primary-purple); cursor:pointer;"><i class="fa-solid fa-plus"></i></button>
                                        </div>
                                        <button type="submit" class="btn-ticket btn-buy btn-confirm hidden" style="width:100%;">Confirm Add</button>
                                    </form>
                                </div>
                            </div>
                            {% empty %}
                            <p class="no-tickets">No tickets available.</p>
                            {% endfor %}
                        </div>
                    </article>
                {% empty %}
                    <div class="no-events-container">
                        <p class="no-tickets">There are currently no upcoming events. Check back soon!</p>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
</section>

<script>
    // ... existing script from your original file ...
</script>
{% endblock content %}